# --- !Ups

create table "DATASOURCES" ("ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,"NAME" VARCHAR NOT NULL,"ENDPOINT_URL" VARCHAR NOT NULL,"NAMED_GRAPHS" VARCHAR,"created" TIMESTAMP,"modified" TIMESTAMP);
create table "VISUALIZATIONS" ("ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,"NAME" VARCHAR NOT NULL,"DATASOURCE_ID" BIGINT NOT NULL,"DSD_DATASOURCE_ID" BIGINT NOT NULL,"created" TIMESTAMP,"modified" TIMESTAMP);
create table "VISUALIZATION_QUERIES" ("ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,"VISUALIZATION_ID" BIGINT NOT NULL,"TOKEN" VARCHAR NOT NULL,"DATA" VARCHAR NOT NULL,"created" TIMESTAMP,"modified" TIMESTAMP);
alter table "VISUALIZATIONS" add constraint "VISUALIZATION_DATASOURCE_FK" foreign key("DATASOURCE_ID") references "DATASOURCES"("ID") on update NO ACTION on delete NO ACTION;
alter table "VISUALIZATIONS" add constraint "VISUALIZATION_DSD_DATASOURCE_FK" foreign key("DSD_DATASOURCE_ID") references "DATASOURCES"("ID") on update NO ACTION on delete NO ACTION;
alter table "VISUALIZATION_QUERIES" add constraint "VISUALIZATION_QUERY_VISUALIZATION_FK" foreign key("VISUALIZATION_ID") references "VISUALIZATIONS"("ID") on update NO ACTION on delete NO ACTION;

# --- !Downs

alter table "VISUALIZATION_QUERIES" drop constraint "VISUALIZATION_QUERY_VISUALIZATION_FK";
alter table "VISUALIZATIONS" drop constraint "VISUALIZATION_DATASOURCE_FK";
alter table "VISUALIZATIONS" drop constraint "VISUALIZATION_DSD_DATASOURCE_FK";
drop table "VISUALIZATION_QUERIES";
drop table "VISUALIZATIONS";
drop table "DATASOURCES";

